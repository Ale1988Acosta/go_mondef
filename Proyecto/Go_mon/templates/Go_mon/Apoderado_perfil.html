{% extends 'Go_mon/plantilla.html' %}
{% load static %}

{% block cabecera %}
<title>{{ datos.nombre }} {{datos.p_apellido}}</title>
{% endblock cabecera %}

{% block nombre %}
<div class="container-fluid" style="margin-top: 80px;">
  <div class="row">
    <div class="col-md-2 col-sm-12">
      <img src="{{datos.foto.url}}" alt="" width="90%" height="90%" class="img_left rounded" style="margin: 10px;">
    </div>
    <div class="col-md-10 col-sm-12">
      <h2><br>{{ datos.nombre }} {{ datos.p_apellido }}</h2>
      <p>Registrado como : {{ apoderado.rol.nombre }} </p>
    </div>
  </div>
</div>
{% endblock nombre %}

{% block info %}
<form action="#" method="POST" name="formulario" id="formu_1">
  <div class="tab-content">
    <div id="cuenta" class="container tab-pane active"><br>

      <h3>Datos Personales</h3>
      <div class="row">
        <div class="col-md-4 col-sm-12">
          <p>Nombres*:</p>
          <input type="text" class="form-control" value="{{ datos.nombre }}" name="nombre" id="nombre"
            style="border-radius: 50px;" readonly>
        </div>
        <div class="col-md-4 col-sm-12">
          <p>Primer Apellido*:</p>
          <input type="text" class="form-control" value="{{ datos.p_apellido }}" name="p_apellido" id="p_apellido"
            style="border-radius: 50px;" readonly>
        </div>
        <div class="col-md-4 col-sm-12">
          <p>Segundo Apellido:</p>
          <input type="text" class="form-control" value="{{ datos.s_apellido }}" name="s_apellido" id="s_apellido"
            style="border-radius: 50px;" readonly>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Sexo*:</p>
          <input type="text" class="form-control" value="{{ datos.sexo }}" name="sexo" id="sexo"
            style="border-radius: 50px;" readonly>

        </div>
        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Numero telefonico*:</p>
          <input type="text" class="form-control" value="{{ datos.celular }}" name="telefono" id="telefono"
            style="border-radius: 50px;" readonly>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Correo electronico*:</p>
          <input type="text" class="form-control" value="{{ datos.correo }}" name="email" id="email"
            style="border-radius: 50px;" readonly>
        </div>

        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Contraseña*:</p>
          <input type="password" class="form-control" value="{{ apoderado.clave }}" name="password" id="password"
            style="border-radius: 50px;" readonly>
        </div>

      </div>

      <div class="row" style="border-radius: 10px;">
        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Direccion*:</p>
          <input type="text" class="form-control" value="{{ direc.descripApoderado }}" name="direccion" id="direccion"
            style="border-radius: 50px;" readonly>
        </div>
        <div class="col-md-6 col-sm-12">
          <p style="margin-top: 10px;">Comuna*:</p>
          <input type="text" class="form-control" value="{{ direc.comuna }}" name="comuna" id="comuna"
            style="border-radius: 50px;" readonly>
        </div>
      </div>

      <a href="{% url 'modiA' datos.rut_apoderado %}" class="btn btn-primary" style="margin-top: 50px; margin-left: 490px; text-align: center; background-color: #7839BA; color: rgb(255, 255, 255);
         border-color: #7839BA;">Editar Perfil</a>


      <h3 style="margin-top: 5%;">Verificacion de la Identidad</h3>
      <div class="row mb-3 " style="margin-top: 5%;">
        <label1 for="cedula" class="col-sm-2 col-form-label" style="text-align: center;">Cedula de Identidad*</label1>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="cedula" name="cedula" style="border-radius: 50px;"
            value="{{ datos.rut_apoderado }}" readonly>
        </div>
      </div>
</form>
{% endblock info %}

{% block menor %}
<form action="{% url 'reg_menor' %}" method="POST" name="formulario" id="formu_2">
  {% csrf_token %}
  <h3> Ingreso del Menor</h3>
  <div class="row mb-3 " style="margin-top: 5%;">
    <label1 for="cedula" class="col-sm-2 col-form-label">Rut del menor*</label1>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="cedula" name="cedula" style="border-radius: 50px;" required>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 col-sm-12">
      <p>Nombres*:</p>
      <input type="text" class="form-control" name="hijo" id="hijo" style="border-radius: 50px;" required>
    </div>
    <div class="col-md-4 col-sm-12">
      <p>Primer Apellido*:</p>
      <input type="text" class="form-control" name="pr_apellido" id="pr_apellido" style="border-radius: 50px;" required>
    </div>
    <div class="col-md-4 col-sm-12">
      <p>Segundo Apellido:</p>
      <input type="text" class="form-control" name="se_apellido" id="se_apellido" style="border-radius: 50px;">
    </div>
  </div>

  <div class="row">
    <div class="col-md-4 col-sm-12" style="margin-top: 2%;">
      <p>Sexo*:</p>
      <select name="genero" id="genero" class="form-control" style="border-radius: 50px;">
        <option selected disabled value="">Escoge...</option>
        {% for s in sexomen %}
        <option value="{{s.id_Sexo}}">{{s.nombre}}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4 col-sm-12" style="margin-top: 2%; border-radius: 50px;">
      <p>Fecha de Nacimiento*:</p>
      <label for="start" class="form-label" style="margin: 11px;"></label>
      <input class="form-control" type="date" id="start" name="start" style="margin-top: -28px; border-radius: 50px;"
        required>
    </div>
    <div class="col-md-4 col-sm-12" style="margin-top: 2%; border-radius: 50px;">
      <label for="start" class="form-label" style="margin: 11px;"></label>
      <input class="form-control" type="text" id="rutApo" name="rutApo" value="{{ datos.rut_apoderado }}"
        style="margin-top: -28px; border-radius: 50px;" required hidden>
    </div>
  </div>
  <input class="form-control" type="hidden" id="correoU" name="correoU" value="{{ datos.correo }}"
    style="margin-top: -28px; border-radius: 50px;" required>
  <input class="form-control" type="hidden" id="pass" name="pass" value="{{ apoderado.clave }}"
    style="margin-top: -28px; border-radius: 50px;" required>


  <center>
    <div class="col-md-12 col-md-12">
      <p id="mensaj" style="color: red;"></p>
      <button type="submit" class="btn btn-primary"
        style="background-color: #7839BA; color: rgb(255, 255, 255); border-color: #7839BA;">Guardar</button>
    </div>
  </center>
</form>


<div class="container">
  <div class="row">
    <h3 style="margin-top: 5%;">Menores Registrados</h3>
    <table class="table table-responsive-xl table-responsive" style="text-align: center;">
      <tr>
        <td>Rut</td>
        <td>Nombre</td>
        <td>Primer Apellido</td>
        <td>Segundo Apellido</td>
        <td>Fecha de nacimiento</td>
        <td>Sexo</td>
        <td>Apoderado</td>
      </tr>
      {% for m in hijo %}
      <tr>
        <td>{{ m.rut_Menor }} </td>
        <td>{{ m.nombre}}</td>
        <td>{{ m.p_Apellido }}</td>
        <td>{{ m.s_Apellido}}</td>
        <td>{{ m.fNacimiento}}</td>
        <td>{{ m.sexo.nombre}}</td>
        <td>{{ m.rut_apoderado }}</td>
        <td><a href="{% url 'eliminar_hijo' m.rut_Menor datos.rut_apoderado  %}" class="btn btn-danger">Eliminar</a><br>
        </td>
        <td><a href="{% url 'modiMenor' m.rut_Menor datos.rut_apoderado  %}" class="btn btn-primary" style=" text-align: center;
             background-color: #7839BA; color: rgb(255, 255, 255);border-color: #7839BA;">Editar</a></td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endblock menor %}

{% block direccion %}
<div class="btn-group" style=" margin-top: 10px; margin-left: 20px; margin-bottom: 15px;">
  <button type="button" class="btn btn-primary"
    style="background-color: white; border-color: #7839BA; color: #7839BA; border-radius: 10px;">No fumador</button>
</div>

<div class="btn-group" style="margin-top: 10px; margin-left: 20px; margin-bottom: 15px;">
  <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown"
    style="background-color: white; border-color: #7839BA; color: #7839BA; border-radius: 10px;">Más filtros</button>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="#">Conduce</a></li>
    <li><a class="dropdown-item" href="#">Tiene auto</a></li>
    <li><a class="dropdown-item" href="#">Cocina</a></li>
    <li><a class="dropdown-item" href="#">Juegos recreativos</a></li>
    <li><a class="dropdown-item" href="#">Paseos</a></li>
  </ul>
</div>

<!--Google map-->
<div class="card-container">
  <div class="panel">
    <div>
      <img class="sb-title-icon" src="https://fonts.gstatic.com/s/i/googlematerialicons/location_pin/v5/24px.svg"
        alt="">
      <span class="sb-title">Busca tu dirección en el mapa</span>
    </div>
    <input type="text" placeholder="Ingrese su direccion" id="location-input" />
    <input type="text" placeholder="Comuna" id="locality-input" />
    <input type="text" placeholder="Region" id="administrative_area_level_1-input" />
    <input type="text" placeholder="Pais" id="country-input" />
    <button type="submit" class="button-cta">Buscar</button>
  </div>
  <div class="map" id="gmp-map"></div>
</div>
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCUBnwjJxE4pbl0Rank1DSF221DWSJnz4c&libraries=places&callback=initMap&solution_channel=GMP_QB_addressselection_v1_cABC"
  async defer></script>

    <div><strong>Cuidadores disponibles en tu misma comuna:</strong> </div>
      <div class="row">
        <table class="table table-striped table-responsive" style="width: 100%; margin-top: 50px;">
          <tr>
            <td>Rut</td>
            <td>Nombre</td>
            <td>Primer Apellido</td>
            <td>Segundo Apellido</td>
            <td>Descripcion</td>
            <td>Sexo</td>
          </tr>
          {% for m in opninera %}
          <tr>
            <td>{{ m.rut_cuidador }} </td>
            <td>{{ m.nombre}}</td>
            <td>{{ m.p_apellido }}</td>
            <td>{{ m.s_apellido}}</td>
            <td>{{ m.descripcion}}</td>
            <td>{{ m.sexo.nombre}}</td>
            <td><a href="{% url 'mapa' m.rut_cuidador datos.rut_apoderado %}" class="btn btn-primary" style=" text-align: center;
            background-color: #7839BA; color: rgb(255, 255, 255);border-color: #7839BA;">Ver</a>
            </td>
          </tr>
          {% endfor %}
        </table>
      </div>
{% endblock direccion %}

